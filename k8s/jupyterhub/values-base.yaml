hub:
  image:
    name: jupyterhub/k8s-hub
    tag: 4.3.1
  config:
    JupyterHub:
      authenticator_class: dummy
    DummyAuthenticator:
      password: "test"
    Authenticator:
      admin_users:
        - user
    KubeSpawner:
      uid: 0
      gid: 0
      fs_gid: 0
      service_account: spark-sa
      automount_service_account_token: true

singleuser:
  image:
    name: statkube/spark-notebook
    tag: spark3.5.3-py3.12-1-v12
    pullPolicy: IfNotPresent
  cmd:
    - jupyterhub-singleuser
    - --allow-root
  defaultUrl: "/lab"
  extraEnv:
    SPARK_HOME: "/opt/spark"
    SPARK_MASTER: "k8s://https://kubernetes.default.svc"
    PYSPARK_PYTHON: "python3"
    PYSPARK_DRIVER_PYTHON: "python3"
    # Git configuration - users can set these in their profile or admin can set defaults
    # GIT_USER_NAME: "Your Name"
    # GIT_USER_EMAIL: "your.email@example.com"
  lifecycleHooks:
    postStart:
      exec:
        command:
          - /bin/bash
          - -c
          - |
            # Configure git user from environment variables if set
            if [ -n "$GIT_USER_NAME" ]; then git config --global user.name "$GIT_USER_NAME"; fi
            if [ -n "$GIT_USER_EMAIL" ]; then git config --global user.email "$GIT_USER_EMAIL"; fi