---
# On-Prem Environment Configuration
# All external resources are accessed via Nexus proxy

all:
  hosts:
    localhost:
      ansible_connection: local
  vars:
    environment_name: onprem

    # k3d host port mappings (avoid collisions on servers where 8080 is already used)
    k3d_http_port: "9080:80@loadbalancer"
    k3d_https_port: "9443:443@loadbalancer"

    # ============================================
    # Docker Registry Configuration
    # ============================================
    # Prefix for Docker Hub images (e.g., eclipse-temurin, busybox)
    # Usage: {{ docker_registry_prefix }}eclipse-temurin:11-jdk-jammy
    docker_registry_prefix: "srvnexus1.dst.dk:18079/"

    # Prefix for GHCR images (e.g., ghcr.io/*)
    # Nexus GHCR proxy on port 18083
    ghcr_registry_prefix: "srvnexus1.dst.dk:18083/"

    # ============================================
    # Helm Repository Configuration
    # ============================================
    # Spark Operator Helm chart repository
    # Original: https://kubeflow.github.io/spark-operator
    helm_spark_operator_repo_name: spark-operator
    helm_spark_operator_repo_url: "https://srvnexus1.dst.dk/repository/spark-operator"

    # JupyterHub Helm chart repository
    # Original: https://jupyterhub.github.io/helm-chart/
    helm_jupyterhub_repo_name: jupyterhub
    helm_jupyterhub_repo_url: "https://srvnexus1.dst.dk/repository/jupyter-hub"

    # ============================================
    # Container Images
    # ============================================
    # Custom images built from this repo
    spark_base_image: "{{ docker_registry_prefix }}statkube/spark-base:spark3.5.3-py3.12-1"
    spark_notebook_image: "{{ docker_registry_prefix }}statkube/spark-notebook:spark3.5.3-py3.12-1"

    # Third-party images (Docker Hub)
    jupyterhub_hub_image: "{{ docker_registry_prefix }}jupyterhub/k8s-hub"
    jupyterhub_hub_tag: "4.3.1"
    minio_image: "{{ docker_registry_prefix }}minio/minio:RELEASE.2024-11-07T00-52-20Z"
    busybox_image: "{{ docker_registry_prefix }}busybox:1.36"
    polaris_image: "{{ docker_registry_prefix }}apache/polaris:latest"

    # Spark Operator image (GHCR - ghcr.io)
    # Original: ghcr.io/googlecloudplatform/spark-operator:v1beta2-1.3.8-3.1.1
    spark_operator_image: "{{ ghcr_registry_prefix }}googlecloudplatform/spark-operator:v1beta2-1.3.8-3.1.1"

    # ============================================
    # Build Configuration (Docker build args)
    # ============================================
    # Base images for Docker builds - use --build-arg BASE_IMAGE=...
    spark_base_build_arg: "srvnexus1.dst.dk:18079/eclipse-temurin:11-jdk-jammy"
    spark_notebook_build_arg: "srvnexus1.dst.dk:18079/statkube/spark-base:spark3.5.3-py3.12-1"
    jupyterhub_hub_build_arg: "srvnexus1.dst.dk:18079/statkube/spark-base:spark3.5.3-py3.12-1"
